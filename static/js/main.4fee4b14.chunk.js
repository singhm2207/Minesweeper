(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{13:function(e,a,t){},14:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(7),c=t.n(l),o=(t(13),t(1)),r=t(3),u=t(5),i=function(e){return e.data.isOpen?e.data.hasMine?s.a.createElement("div",{className:"cell open",onClick:function(){e.open(e.data)},onContextMenu:function(e){e.preventDefault()}},s.a.createElement("strong",null,"(X)")):0===e.data.count?s.a.createElement("div",{className:"cell open",onClick:function(){e.open(e.data)},onContextMenu:function(a){a.preventDefault(),e.flag(e.data)}}):s.a.createElement("div",{className:"cell open",onClick:function(){e.open(e.data)},onContextMenu:function(e){e.preventDefault()}},e.data.count):e.data.hasFlag?s.a.createElement("div",{className:"cell",onContextMenu:function(a){a.preventDefault(),e.flag(e.data)},onClick:function(){return e.open(e.data)}},s.a.createElement("strong",null,"|>")):s.a.createElement("div",{className:"cell closed",onClick:function(){return e.open(e.data)},onContextMenu:function(a){a.preventDefault(),e.flag(e.data)}})},f=function(e){var a=e.cells.map((function(a,t){return s.a.createElement(i,{key:t,data:a,open:e.open,flag:e.flag})}));return s.a.createElement("div",{className:"row"},a)},m=function(e){var a=function(e){for(var a=[],t=0;t<e.rows;t++){a.push([]);for(var n=0;n<e.columns;n++)a[t].push({x:n,y:t,count:0,isOpen:!1,hasMine:!1,hasFlag:!1})}for(var s=0;s<e.mines;s++){var l=Math.floor(Math.random()*e.rows),c=Math.floor(Math.random()*e.columns),o=a[l][c];o.hasMine?s--:o.hasMine=!0}return a},t=function(a){var t=Object(u.a)(p);a.hasFlag=!a.hasFlag,t[a.y][a.x].hasFlag=a.hasFlag,d(t),e.changeFlagAmount(a.hasFlag?-1:1)},l=function(t){new Promise((function(e){e(c(t))})).then((function(n){var s=p,l=s[t.y][t.x];if(l.hasMine&&0===e.openCells){var c=a(e);d(c)}else if(!t.hasFlag&&!l.isOpen){e.openCellClick();var r=Object(u.a)(s);r[t.y][t.x].isOpen=!0,r[t.y][t.x].count=n,d(r),r[t.y][t.x].hasMine||0!==n||o(t),l.hasMine&&0!==e.openCells&&e.endGame()}}))},c=function(e){for(var a=0,t=-1;t<=1;t++)for(var n=-1;n<=1;n++)e.y+t>=0&&e.x+n>=0&&e.y+t<p.length&&e.x+n<p[0].length&&(!p[e.y+t][e.x+n].hasMine||0===t&&0===n||a++);return a},o=function(e){for(var a=Object(u.a)(p),t=-1;t<=1;t++)for(var n=-1;n<=1;n++)e.y+t>=0&&e.x+n>=0&&e.y+t<p.length&&e.x+n<p[0].length&&(p[e.y+t][e.x+n].hasMine||a[e.y+t][e.x+n].isOpen||l(a[e.y+t][e.x+n]))},i=Object(n.useState)(null),m=Object(r.a)(i,2),p=m[0],d=m[1],g=Object(n.useState)(null),v=Object(r.a)(g,2),C=v[0],h=v[1];Object(n.useEffect)((function(){if(p)b(p);else{var t=a(e);d(t),b(t)}}),[p]),Object(n.useEffect)((function(){if("waiting"===e.status){var t=a(e);d(t),b(t)}}),[e.status]);var b=function(e){var a=e.map((function(e,a){return s.a.createElement(f,{cells:e,key:a,open:l,flag:t})}));h(a)};return s.a.createElement("div",{className:"board"},C)},p=function(e){return"running"===e.status?s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},"Flags: ",e.flagCount),s.a.createElement("button",{className:"reset running",onClick:e.reset},e.status.toUpperCase())):"ended"===e.status?s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},"Flags: ",e.flagCount),s.a.createElement("button",{className:"reset ended",onClick:e.reset},e.status.toUpperCase())):"winner"===e.status?s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},"Flags: ",e.flagCount),s.a.createElement("button",{className:"reset winner",onClick:e.reset},e.status.toUpperCase())):s.a.createElement("div",{className:"board-head"},s.a.createElement("div",{className:"flag-count"},"Flags: ",e.flagCount),s.a.createElement("button",{className:"reset waiting",onClick:e.reset},e.status.toUpperCase()))};var d=function(){var e=Object(n.useState)({status:"waiting",rows:10,columns:10,flags:10,mines:10,openCells:0}),a=Object(r.a)(e,2),t=a[0],l=a[1],c=Object(n.useCallback)((function(){t.mines+t.openCells>=t.rows*t.columns&&l(Object(o.a)(Object(o.a)({},t),{},{status:"winner"}))}),[t.openCells]);Object(n.useEffect)((function(){"running"===t.status&&c()}),[t.status,c]);var u=Object(n.useCallback)((function(){l((function(e){return Object(o.a)(Object(o.a)({},t),{},{openCells:e.openCells+1,status:"running"})}))}));return s.a.createElement("div",{className:"minesweeper"},s.a.createElement("h1",null,"Minesweeper"),s.a.createElement(p,{flagCount:t.flags,reset:function(){l(Object(o.a)(Object(o.a)({},t),{},{status:"waiting",rows:10,columns:10,flags:10,mines:10,openCells:0}))},status:t.status}),s.a.createElement(m,{rows:t.rows,columns:t.columns,mines:t.mines,status:t.status,openCells:t.openCells,openCellClick:u,endGame:function(){l(Object(o.a)(Object(o.a)({},t),{},{status:"ended"}))},changeFlagAmount:function(e){l(Object(o.a)(Object(o.a)({},t),{},{flags:t.flags+e}))}}))};c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(d,null)),document.getElementById("root"))},8:function(e,a,t){e.exports=t(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.4fee4b14.chunk.js.map